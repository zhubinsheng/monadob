shared: Break out message channel functions to own files.
